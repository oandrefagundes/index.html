<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Organizador de PNG</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #111;
    color: white;
    text-align: center;
}

h1 {
    margin: 15px 0;
}

#upload {
    margin: 15px;
}

#preview {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding: 10px;
    justify-content: center;
}

.thumb {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border: 2px solid #444;
    cursor: grab;
}

button {
    padding: 10px 20px;
    margin: 10px;
    font-size: 16px;
    cursor: pointer;
}

#viewer {
    display: none;
    position: fixed;
    inset: 0;
    background: black;
    align-items: center;
    justify-content: center;
    flex-direction: column;
}

#viewer img {
    max-width: 100%;
    max-height: 90vh;
}

.nav {
    position: absolute;
    bottom: 20px;
}
</style>
</head>

<body>

<h1>Organizador de PNG</h1>

<input type="file" id="upload" accept="image/png" multiple>
<br>
<button onclick="startViewer()">Modo Apresentação</button>

<div id="preview"></div>

<div id="viewer">
    <img id="currentImage">
    <div class="nav">
        <button onclick="prev()">⬅</button>
        <button onclick="next()">➡</button>
        <button onclick="closeViewer()">Fechar</button>
    </div>
</div>

<script>
let images = [];
let currentIndex = 0;

const upload = document.getElementById("upload");
const preview = document.getElementById("preview");

upload.addEventListener("change", function(e) {
    images = [];
    preview.innerHTML = "";

    Array.from(e.target.files).forEach(file => {
        const reader = new FileReader();
        reader.onload = function(event) {
            images.push(event.target.result);
            createThumb(event.target.result);
        };
        reader.readAsDataURL(file);
    });
});

function createThumb(src) {
    const img = document.createElement("img");
    img.src = src;
    img.className = "thumb";
    img.draggable = true;

    img.addEventListener("dragstart", dragStart);
    img.addEventListener("dragover", dragOver);
    img.addEventListener("drop", drop);

    preview.appendChild(img);
}

let dragged;

function dragStart(e) {
    dragged = e.target;
}

function dragOver(e) {
    e.preventDefault();
}

function drop(e) {
    e.preventDefault();
    if (e.target.className === "thumb") {
        preview.insertBefore(dragged, e.target);
        updateOrder();
    }
}

function updateOrder() {
    images = Array.from(preview.children).map(img => img.src);
}

function startViewer() {
    if (images.length === 0) return;
    currentIndex = 0;
    document.getElementById("viewer").style.display = "flex";
    showImage();
}

function showImage() {
    document.getElementById("currentImage").src = images[currentIndex];
}

function next() {
    currentIndex = (currentIndex + 1) % images.length;
    showImage();
}

function prev() {
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    showImage();
}

function closeViewer() {
    document.getElementById("viewer").style.display = "none";
}
</script>

</body>
</html>
